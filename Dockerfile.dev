FROM mhart/alpine-node:8.11.3

ENV NODE_PATH ./lib

RUN apk update && apk add \
    git \
    openssh-client
    
RUN npm i -g grunt-cli

COPY package.json package-lock.json? .npmrc? /opt/app/

WORKDIR /opt/app

RUN npm i

COPY . /opt/app/

ENTRYPOINT ["grunt", "build-serve"]

EXPOSE 8000